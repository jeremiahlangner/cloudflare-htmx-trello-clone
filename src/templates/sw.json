{"sw":"var O=Object.freeze,et=Object.defineProperty;var y=(e,t)=>O(et(e,\"raw\",{value:O(t||e.slice())}));var $=class{name=\"\";store=Promise.resolve();constructor(t,i){if(console.log(\"setting up\"),i)return i;this.name=t,this.store=new Promise((s,n)=>{let r=indexedDB.open(this.name,1);r.onerror=()=>n(r.error),r.onupgradeneeded=()=>r.result.createObjectStore(this.name),r.onsuccess=()=>s(r.result)})}async get(t){let i=await this.store;return new Promise((s,n)=>{let r=i.transaction(this.name,\"readonly\"),o=r.objectStore(this.name).get(t);r.oncomplete=()=>s(o.result),r.onerror=()=>n(r.error)})}async put(t,i){let s=await this.store;return new Promise((n,r)=>{let o=s.transaction(this.name,\"readwrite\"),a=o.objectStore(this.name).put(i,t);o.oncomplete=()=>n(a),o.onerror=()=>r(o.error)})}async delete(t){let i=await this.store;return new Promise((s,n)=>{let r=i.transaction(this.name,\"readwrite\"),o=r.objectStore(this.name).delete(t);r.oncomplete=()=>s(o),r.onerror=()=>n(r.error)})}},N=$;var P=class{routes;constructor(e=[]){this.routes=[];for(let t of e)this.register(...t)}register(e,t,i=\"GET\"){this.routes.push({path:new URLPattern({pathname:e}),method:i,handler:t})}handle(e){let{request:t}=e;for(let i of this.routes){if(i.method!==t.method)continue;let s=i.path.exec({pathname:new URL(t.url).pathname});if(s)return i.handler({...e,route:s})}return new Response(\"Not found\",{status:404})}};var j={styles:`body{margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}.app{background:#3465a4;height:100vh}.header{display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.15);color:#fff;border-bottom:1px solid rgba(0,0,0,.12);font-size:40px;font-weight:200;padding:5px 0 5px 20px}.header-buttons{display:flex;margin-right:16px;margin-left:auto}.header-buttons .edit-button{margin:0 0 0 8px}.board{height:92%;display:-webkit-flex;display:flex;overflow-x:auto}.add-list{width:272px;margin:10px;-webkit-flex-shrink:0;flex-shrink:0}.add-list-button{background-color:#0000001f;border-radius:4px;cursor:pointer;color:#fff;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;min-height:32px;padding:5px 8px;transition:background-color 85ms ease-in,opacity 40ms ease-in,border-color 85ms ease-in;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.add-list-button:hover{background-color:#0000003d}.list{background:#dfe3e6;-webkit-flex-shrink:0;flex-shrink:0;width:272px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin:10px 0 10px 10px;border-radius:4px;border:1px solid rgba(0,0,0,.12)}.list-title{cursor:pointer;padding:10px;overflow-wrap:break-word}.toggle-add-card{cursor:pointer;padding:10px;color:#333;border-radius:0 0 4px 4px;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;border:none;width:100%}.toggle-add-card:hover{background-color:#092d4221;color:#17394d;text-decoration:underline}.card{position:relative;cursor:grab;background:#fff;margin:5px;padding:10px;border-radius:5px;border:1px solid rgba(0,0,0,.12);box-shadow:0 1px #092d4240;font-size:15px;overflow-wrap:break-word;min-height:18px}.card:hover{background:#f5f6f7}.card-icons{position:absolute;top:5px;right:5px;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:flex-end;justify-content:flex-end}.card-icon,.card-icons{display:-webkit-flex;display:flex}.card-icon{cursor:pointer;width:24px;height:24px;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;border-radius:5px;margin:1px;color:#00000080;background:#f5f6f7;opacity:.9;border:none}.card-icon:hover{opacity:1;background:#dcdcdc}.edit-card .card{min-height:50px;padding-left:8px;padding-right:15px}.edit-card .card:hover{background:#fff}.edit-card-textarea{width:100%;border:none;resize:none;outline:none;font-size:15px}.edit-buttons{display:-webkit-flex;display:flex}.edit-button{cursor:pointer;box-shadow:0 1px #3f6f21;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:0 5px 10px;padding:6px 12px;border-radius:5px;border:none;color:#fff;outline:none}.edit-button:hover{opacity:.7}.edit-button-cancel{cursor:pointer;margin-bottom:10px;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;font-size:20px;opacity:.5;outline:none;padding:0;border:none}.edit-button-cancel:hover{opacity:1}.list-title-edit{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center}.list-title-textarea{margin:6px 0 5px 6px;border-radius:3px;border:none;resize:none;outline:none;font-size:15px;padding:5px}.list-title-textarea:focus{box-shadow:inset 0 0 0 2px #0079bf}.add-list-editor{background:#dfe3e6;border-radius:5px;padding:2px}.hidden{display:none}\n`};function d(e,...t){return String.raw({raw:e},...t)}function A(e){let t=\"\";do t=Math.random().toString(16).substring(2,15);while(e[t]);return t}async function c(e){return new Response(e,{headers:{\"content-type\":\"text/html;charset=UTF-8\"}})}var J=j.styles,E,yt=d(E||(E=y([`\n  <!doctype html>\n  <html lang=\"en\">\n    <head>\n      <meta charset=\"UTF-8\" />\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n      <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\" />\n      <title>HTMX Trello Clone</title>\n      <style>\n        `,`\n      </style>\n      <script>\n        function reload(state) {\n          state.onstatechange = () => {\n            if (state.state === \"installed\") {\n              location.reload();\n            }\n          };\n        }\n\n        async function registerServiceWorker() {\n          if (\"serviceWorker\" in navigator) {\n            try {\n              const registration = await navigator.serviceWorker.register(\n                \"/sw.js\",\n                {\n                  scope: \"/\",\n                  type: \"module\",\n                },\n              );\n              if (registration.installing) {\n                console.log(\"Service worker installing\");\n                reload(registration.installing);\n              } else if (registration.waiting) {\n                console.log(\"Service worker installed\");\n                reload(registration.waiting);\n              } else if (registration.active) {\n                console.log(\"Service worker active\");\n                location.reload();\n              }\n            } catch (error) {\n              console.error(\"Registration failed with\" + error);\n            }\n          }\n        }\n        registerServiceWorker();\n      <\\/script>\n    </head>\n    <body>\n      <div\n        class=\"app\"\n        style=\"text-align: center; display: flex; justify-content: center; align-items: center; color: white;\"\n      >\n        Loading...\n      </div>\n    </body>\n  </html>\n`])),J),I;function R(e){return d(I||(I=y([`\n    <!doctype html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\" />\n        <title>HTMX Trello Clone</title>\n        <style>\n          `,`\n        </style>\n        <script>\n          const registerServiceWorker = async () => {\n            if (\"serviceWorker\" in navigator) {\n              try {\n                const registration = await navigator.serviceWorker.register(\n                  \"/sw.js\",\n                  {\n                    scope: \"/\",\n                    type: \"module\",\n                  },\n                );\n                if (registration.installing) {\n                  console.log(\"Service worker installing\");\n                } else if (registration.waiting) {\n                  console.log(\"Service worker installed\");\n                } else if (registration.active) {\n                  console.log(\"Service worker active\");\n                }\n              } catch (error) {\n                console.error(\"Registration failed with\" + error);\n              }\n            }\n          };\n          registerServiceWorker();\n        <\\/script>\n      </head>\n      <body>\n        `,`\n      </body>\n    </html>\n  `])),J,e.template)}var k=d`\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    fill=\"currentColor\"\n    class=\"bi bi-plus\"\n    viewBox=\"0 0 16 16\"\n  >\n    <path\n      d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"\n    />\n  </svg>\n`,w=d`\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    fill=\"currentColor\"\n    class=\"bi bi-x\"\n    viewBox=\"0 0 16 16\"\n  >\n    <path\n      d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"\n    />\n  </svg>\n`,M=d`\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    fill=\"currentColor\"\n    class=\"bi bi-pencil-fill\"\n    viewBox=\"0 0 16 16\"\n  >\n    <path\n      d=\"M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z\"\n    />\n  </svg>\n`,_=d`\n  <svg\n    fill=\"#ffffff\"\n    height=\"12\"\n    width=\"12\"\n    version=\"1.1\"\n    id=\"Layer_1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n    viewBox=\"0 0 383.748 383.748\"\n    xml:space=\"preserve\"\n  >\n    <g>\n      <path\n        d=\"M62.772,95.042C90.904,54.899,137.496,30,187.343,30c83.743,0,151.874,68.13,151.874,151.874h30\n\t\tC369.217,81.588,287.629,0,187.343,0c-35.038,0-69.061,9.989-98.391,28.888C70.368,40.862,54.245,56.032,41.221,73.593\n\t\tL2.081,34.641v113.365h113.91L62.772,95.042z\"\n      />\n      <path\n        d=\"M381.667,235.742h-113.91l53.219,52.965c-28.132,40.142-74.724,65.042-124.571,65.042\n\t\tc-83.744,0-151.874-68.13-151.874-151.874h-30c0,100.286,81.588,181.874,181.874,181.874c35.038,0,69.062-9.989,98.391-28.888\n\t\tc18.584-11.975,34.707-27.145,47.731-44.706l39.139,38.952V235.742z\"\n      />\n    </g>\n  </svg>\n`;function st(e){let{list:t}=e;return d`\n    <button\n      class=\"toggle-add-card\"\n      id=\"btn-add-card-${t.id}\"\n      type=\"button\"\n      _=\"on click toggle .hidden on me toggle .hidden on #add-card-${t.id}\"\n    >\n      ${k}\n      <span> Add another card</span>\n    </button>\n  `}var S=st;function rt(e){let{list:t}=e;return d`\n    <div class=\"edit-card hidden\" id=\"add-card-${t.id}\">\n      <div class=\"card\">\n        <textarea\n          class=\"edit-card-textarea\"\n          name=\"label-${t.id}\"\n          placeholder=\"Enter a title for this card...\"\n          style=\"height: 34px;\"\n          maxlength=\"300\"\n          autofocus=\"true\"\n        ></textarea>\n        <input type=\"hidden\" name=\"listId\" value=\"${t.id}\" />\n      </div>\n      <div class=\"edit-buttons\">\n        <button\n          class=\"edit-button\"\n          type=\"button\"\n          tabindex=\"0\"\n          style=\"background-color: rgb(90, 172, 68);\"\n          hx-post=\"/cards/new/${t.id}\"\n          hx-target=\"#board\"\n          hx-swap=\"innerHTML\"\n          hx-params=\"label-${t.id}\"\n        >\n          Add card\n        </button>\n        <div\n          class=\"edit-button-cancel\"\n          tabindex=\"0\"\n          _=\"on click toggle .hidden on #add-card-${t.id} toggle .hidden on #btn-add-card-${t.id}\"\n        >\n          ${w}\n        </div>\n      </div>\n    </div>\n  `}var z=rt;var at=d`\n  <div\n    id=\"add-list\"\n    class=\"add-list-button\"\n    hx-get=\"/lists/add\"\n    hx-swap=\"outerHTML\"\n    hx-target=\"#add-list\"\n    draggable=\"false\"\n  >\n    ${k} Add another list\n    <div></div>\n  </div>\n`,C=at;function nt(e){let{list:t,card:i}=e;return d`\n    <div\n      class=\"card\"\n      id=\"card-${i.id}\"\n      tabindex=\"0\"\n      aria-roledescription=\"Draggable item. Press space bar to lift\"\n      draggable=\"true\"\n      _=\"on mouseenter toggle .hidden on #card-edit-${i.id} until mouseleave\"\n    >\n      <div class=\"card-icons hidden\" id=\"card-edit-${i.id}\">\n        <button\n          class=\"card-icon\"\n          type=\"button\"\n          hx-get=\"/cards/edit/${t.id}/${i.id}\"\n          hx-target=\"#card-${i.id}\"\n          hx-swap=\"outerHTML\"\n        >\n          ${M}\n        </button>\n      </div>\n      ${i.label}\n    </div>\n  `}var L=nt;function ot(e){let t=d``;for(let i of e.cards)t+=d`${L({list:e,card:i})}`;return t}function dt(e){let{lists:t}=e,i=d``;for(let s of t)i+=d`\n      <div class=\"list\" draggable=\"true\" id=\"lists-list-${s.id}\">\n        <div class=\"list-title\">${s.name}</div>\n\n        <div class=\"list-cards sortable\" id=\"list-${s.id}\">\n          ${ot(s)}\n        </div>\n        ${S({list:s})} ${z({list:s})}\n      </div>\n    `;return i+=d` <div class=\"add-list\">${C}</div> `,i}var h=dt;var U;function lt(e){return c(R({template:d(U||(U=y([`\n        <div class=\"app\">\n          <div class=\"header\">\n            htmx Trello Clone\n            <div class=\"header-buttons\">\n              <button\n                class=\"edit-button\"\n                type=\"button\"\n                style=\"background-color: #0d6efd;\"\n                hx-get=\"/db/lists\"\n                hx-target=\"#board\"\n                hx-swap=\"innerHTML\"\n              >\n                `,` Sync\n              </button>\n              <button\n                class=\"edit-button\"\n                type=\"button\"\n                style=\"background-color: rgb(90, 172, 68);\"\n                hx-post=\"/db/lists\"\n                hx-swap=\"none\"\n              >\n                Save\n              </button>\n            </div>\n          </div>\n\n          <form hx-post=\"/cards/move\" hx-trigger=\"cardmoved\" hx-target=\"#board\">\n            <input id=\"fromList\" type=\"hidden\" name=\"from\" />\n            <input id=\"toList\" type=\"hidden\" name=\"to\" />\n            <input id=\"movedCard\" type=\"hidden\" name=\"movedCard\" />\n            <input id=\"index\" type=\"hidden\" name=\"index\" />\n            <input id=\"prevIndex\" type=\"hidden\" name=\"prevIndex\" />\n            <div\n              id=\"board\"\n              class=\"board\"\n              _=\"on end put event.from.id into #fromList.value put event.to.id into #toList.value put event.item.id into #movedCard.value put event.newIndex into #index.value put event.oldIndex into #prevIndex.value then send cardmoved\"\n            >\n              `,`\n            </div>\n          </form>\n        </div>\n        <script src=\"https://unpkg.com/htmx.org\"><\\/script>\n        <script src=\"https://unpkg.com/hyperscript.org\"><\\/script>\n        <script src=\"https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js\"><\\/script>\n        <script>\n          htmx.onLoad(function (content) {\n            const foo = new Sortable(board, {\n              name: \"board\",\n              animation: 150,\n              group: \"board\",\n            });\n            const cards = document.querySelectorAll(\".sortable\");\n            for (const card of cards) {\n              new Sortable(card, {\n                animation: 150,\n                group: \"card\",\n              });\n            }\n          });\n        <\\/script>\n      `])),_,h(e))}))}var D=lt;function ct(){return c(d`\n    <div id=\"add-list\" class=\"add-list-editor\">\n      <form hx-post=\"/lists\" hx-target=\"#board\">\n        <div class=\"list-title-edit\">\n          <input\n            class=\"list-title-textarea\"\n            type=\"text\"\n            maxlength=\"30\"\n            name=\"name\"\n            placeholder=\"Enter list title...\"\n            style=\"width: 245px; height: 17px;\"\n            autofocus=\"true\"\n          />\n        </div>\n        <div class=\"edit-buttons\">\n          <button\n            class=\"edit-button\"\n            type=\"submit\"\n            tabindex=\"0\"\n            style=\"background-color: rgb(90, 172, 68);\"\n          >\n            Add list\n          </button>\n          <button\n            class=\"edit-button-cancel\"\n            type=\"button\"\n            tabindex=\"0\"\n            hx-get=\"/lists/cancel\"\n            hx-target=\"#add-list\"\n            hx-swap=\"outerHTML\"\n          >\n            ${w}\n          </button>\n        </div>\n      </form>\n    </div>\n  `)}var q=ct;function pt(e){let{list:t,card:i}=e;return d`\n    <div id=\"edit-card\" class=\"edit-card\">\n      <form\n        hx-put=\"/cards/${t.id}/${i.id}\"\n        hx-target=\"#edit-card\"\n        hx-swap=\"outerHTML\"\n      >\n        <div class=\"card\">\n          <textarea\n            class=\"edit-card-textarea\"\n            name=\"label\"\n            style=\"height: 34px;\"\n            maxlength=\"300\"\n            autofocus=\"true\"\n          >\n${i.label}</textarea\n          >\n          <input type=\"hidden\" name=\"listId\" value=\"${t.id}\" />\n        </div>\n        <div class=\"edit-buttons\">\n          <button\n            class=\"edit-button\"\n            type=\"submit\"\n            tabindex=\"0\"\n            style=\"background-color: rgb(90, 172, 68);\"\n            _=\"on htmx:afterOnLoad remove #edit-card\"\n          >\n            Update\n          </button>\n          <button\n            class=\"edit-button\"\n            type=\"button\"\n            tabindex=\"0\"\n            style=\"background-color: rgb(234, 37, 37);\"\n            hx-delete=\"/cards/${t.id}/${i.id}\"\n            _=\"on htmx:afterOnLoad remove #edit-card\"\n          >\n            Delete\n          </button>\n          <div\n            class=\"edit-button-cancel\"\n            tabindex=\"0\"\n            hx-get=\"/cards/cancel-edit/${t.id}/${i.id}\"\n            hx-target=\"#edit-card\"\n            hx-swap=\"outerHTML\"\n          >\n            ${w}\n          </div>\n        </div>\n      </form>\n    </div>\n  `}var B=pt;async function W(e){let{env:t}=e;return{lists:JSON.parse(await t.TrelloLists.get(\"lists\"))}}async function F(e){let{route:t,env:i}=e,{list_id:s}=t.pathname.groups,n=JSON.parse(await i.TrelloLists.get(\"lists\"));return n=n.filter(r=>r.id!==s),await i.TrelloLists.put(\"lists\",JSON.stringify(n)),{lists:n}}async function V(e){let{request:t,env:i,route:s}=e,{list_id:n,id:r}=s.pathname.groups,o=new URLSearchParams(await t.text()),a=Object.fromEntries(o),{label:l}=a,p=JSON.parse(await i.TrelloLists.get(\"lists\")),u=p.find(x=>x.id===n),f=u.cards.find(x=>x.id===r);return f.label=l,await i.TrelloLists.put(\"lists\",JSON.stringify(p)),{list:u,card:f}}async function X(e){let{env:t,route:i}=e,{list_id:s,id:n}=i.pathname.groups,o=JSON.parse(await t.TrelloLists.get(\"lists\")).find(l=>l.id===s),a=o.cards.find(l=>l.id===n);return{list:o,card:a}}async function G(e){let{env:t,route:i}=e,{list_id:s,id:n}=i.pathname.groups,r=JSON.parse(await t.TrelloLists.get(\"lists\")),o=r.find(a=>a.id===s);o.cards=o.cards.filter(a=>a.id!==n),await t.TrelloLists.put(\"lists\",JSON.stringify(r))}async function K(e){let{request:t,env:i}=e,s=new URLSearchParams(await t.text()),n=Object.fromEntries(s),{name:r}=n,o=JSON.parse(await i.TrelloLists.get(\"lists\"));return o.push({name:r,id:A({}),cards:[]}),await i.TrelloLists.put(\"lists\",JSON.stringify(o)),{lists:o}}async function Q(e){let{request:t,route:i,env:s}=e,n=JSON.parse(await s.TrelloLists.get(\"lists\")),{list_id:r}=i.pathname.groups,o=new URLSearchParams(await t.text()),l=Object.fromEntries(o)[\"label-\"+r],p=n.find(f=>f.id===r),u={label:l,id:A({}),list:r};return p.cards.push(u),await s.TrelloLists.put(\"lists\",JSON.stringify(n)),{lists:n}}async function Y(e){let{env:t,route:i}=e,s=i.pathname.groups.id;return{list:JSON.parse(await t.TrelloLists.get(\"lists\")).find(o=>o.id===s)}}async function Z(e){let{env:t,route:i}=e,{list_id:s,id:n}=i.pathname.groups,o=JSON.parse(await t.TrelloLists.get(\"lists\")).find(l=>l.id===s),a=o.cards.find(l=>l.id===n);return{list:o,card:a}}async function tt(e){let{request:t,env:i}=e,s=new URLSearchParams(await t.text()),n=Object.fromEntries(s),{from:r,to:o,movedCard:a,index:l,prevIndex:p}=n,[,u]=r.split(\"-\"),[,f]=o.split(\"-\"),x=a.replace(\"card-\",\"\"),g=JSON.parse(await i.TrelloLists.get(\"lists\"));try{if(r===\"board\"&&o===\"board\"){let m=g[p];g=g.filter(v=>v.id!==m.id),g.splice(l,0,m),await i.TrelloLists.put(\"lists\",JSON.stringify(g))}else{let m=JSON.parse(JSON.stringify(g)),v=m.find(b=>b.id===u),H=v.cards.find(b=>b.id==x);H.list=f,v.cards=v.cards.filter(b=>b.id!=x),m.find(b=>b.id==f).cards.splice(Number(l),0,H),g=m,await i.TrelloLists.put(\"lists\",JSON.stringify(g))}}catch(m){console.error(m)}return{lists:g}}self.addEventListener(\"install\",e=>{});self.addEventListener(\"activate\",e=>{});var T;self.addEventListener(\"fetch\",e=>[\"https://unpkg.com/hyperscript.org\",\"https://unpkg.com/htmx.org\",\"https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js\"].includes(e.request.url)?fetch(e.request):e.respondWith((async()=>{T||(T=new N(\"trelloClone\",T));let i=e.request,s={TrelloLists:T},n=void 0,r;try{r=JSON.parse(await s.TrelloLists.get(\"lists\"))}catch{}if(!r){let a=await fetch(\"/db/lists\").then(l=>l.json());await s.TrelloLists.put(\"lists\",JSON.stringify(a))}return new P([[\"/\",async a=>D(await W(a))],[\"/lists\",async a=>c(h(await K(a))),\"POST\"],[\"/lists/add\",q],[\"/lists/cancel\",()=>c(C)],[\"/lists/:list_id\",async a=>c(h(await F(a))),\"DELETE\"],[\"/cards/move\",async a=>c(h(await tt(a))),\"POST\"],[\"/cards/new/:list_id\",async a=>c(h(await Q(a))),\"POST\"],[\"/cards/cancel/:id\",async a=>c(S(await Y(a)))],[\"/cards/edit/:list_id/:id\",async a=>c(B(await Z(a)))],[\"/cards/:list_id/:id\",async a=>c(L(await V(a))),\"PUT\"],[\"/cards/:list_id/:id\",async a=>(await G(a),c(\"\")),\"DELETE\"],[\"/cards/cancel-edit/:list_id/:id\",async a=>c(L(await X(a)))],[\"/db/:key\",async a=>{let l=a.route.pathname.groups.key,p=await fetch(\"/db/\"+l).then(u=>u.json());if(await s.TrelloLists.put(l,JSON.stringify(p)),l===\"lists\")return c(h({lists:p}))}],[\"/db/:key\",async a=>{let l=a.route.pathname.groups.key,p=await s.TrelloLists.get(l);return await fetch(\"/db/\"+l,{headers:{\"content-type\":\"application/json\"},body:p,method:\"POST\"}),c(\"\")},\"POST\"]]).handle({request:i,env:s,ctx:n})})()));\n"}